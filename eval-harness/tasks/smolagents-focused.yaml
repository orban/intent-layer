# Focused multi-run: divergent + control tasks from smolagents
# 2 divergent (1 real, 1 infra-noise), 1 control (all-PASS)

repo:
  url: https://github.com/huggingface/smolagents
  default_branch: main
  docker:
    image: python:3.11-slim
    setup:
    - pip install uv && uv pip install --system "smolagents[test] @ ."
    test_command: pytest
  strip_extra:
  - .claude/
  - .cursor/
  - .codex/

tasks:
# CONTROL: all-PASS in single run (easy task, variance baseline)
- id: fix-role-not-converted-back-to-enum
  category: simple_fix
  difficulty: easy
  pre_fix_commit: d8c921d526514ab15ef88c7defa1df7f71209251
  fix_commit: 4dbafef429bf64350f4226cdf2833ba30352ef65
  prompt_source: failing_test
  _commit_message: 'bug: role not converted back to enum'
  _lines_changed: 18
  _files_changed: 2
  test_file: tests/test_models.py
  issue_number: 1833

# DIVERGENT (infra-noise): none=PASS, flat_llm=INFRA, intent_layer=PASS
- id: fix-enum-metaclass-support-in-local-executor
  category: simple_fix
  difficulty: medium
  pre_fix_commit: eecc64e69c06099e1c2669679b77e669eb05e8d1
  fix_commit: 3081d5130b545305ea0cc7711a7cdb28b7ea42c0
  prompt_source: failing_test
  _commit_message: 'Fix LocalPythonExecutor support for Enum and other metaclasses'
  _lines_changed: 50
  _files_changed: 2
  test_file: tests/test_local_python_executor.py
  issue_number: 1797

# DIVERGENT (real): none=FAIL, flat_llm=PASS, intent_layer=PASS
- id: fix-safe-serializer-get-deserializer-code
  category: complex_fix
  difficulty: hard
  pre_fix_commit: 41a3b005fadc6edd587a3ac6f6812987da405e26
  fix_commit: b48889204ad50b6dce7546ae364eedc6ceb87d46
  prompt_source: failing_test
  _commit_message: 'Fix SafeSerializer.get_deserializer_code'
  _lines_changed: 122
  _files_changed: 3
  test_file: tests/test_serialization.py
  issue_number: 1983
